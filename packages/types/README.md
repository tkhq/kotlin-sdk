# com.turnkey.types

Strongly‑typed data models for the Turnkey API, generated from OpenAPI/Swagger. This module ships a single Kotlin source file containing all enums, request/response DTOs, and auxiliary types used by other Turnkey packages (e.g., turnkey-http, sdk-kotlin).

* Single file: Models.kt (package com.turnkey.types)
* Serde: kotlinx.serialization with stable @SerialName mappings
* Coverage: Public API + Auth Proxy models (prefixed with Proxy...)

> Android/JVM compatible. Zero Android dependencies.

## Installation

Gradle (Kotlin DSL):
```kotlin
dependencies {
    implementation("com.turnkey:types:<version>")
    // Serialization runtime
    api("org.jetbrains.kotlinx:kotlinx-serialization-core:<latest>")
    implementation("org.jetbrains.kotlinx:kotlinx-serialization-json:<latest>")
}
```

## What’s inside

* Enums with OpenAPI values via `@SerialName` (e.g., `V1ActivityStatus`, `V1AccessType`)
* DTOs for requests, responses, and embedded payloads (e.g., `V1OauthLoginRequest`, `V1OauthLoginResult`, `V1Attestation`, `V1Authenticator`)
* Proxy DTOs generated from the Auth Proxy spec (all prefixed with Proxy...)

## Code generation

Models are generated by a tools module task and checked into this module’s src/main/kotlin directory.

**Inputs**

* `openapi/public_api.swagger.json`
* `openapi/auth_proxy.swagger.json` (models emitted with Proxy prefix)

### Run codegen

From the types module:
```bash
./gradlew regenerateModels
```

From repo root:
```bash
./gradlew :projects:types:regenerateModels
```

The underlying javaexec task:
```bash
./gradlew types-codegen
# or
./gradlew :projects:types:types-codegen
```

`types-codege` flags:

| Flag              | Meaning                                                      |
|-------------------|--------------------------------------------------------------|
| `--spec`          | Path to an OpenAPI/Swagger source file. Repeatable.          |
| `--prefix`        | Model name prefix to apply to that spec (`""` or `"Proxy"`). |
| `--out`           | Target source directory for generated Kotlin.                |
| `--pkg`           | Kotlin package for the generated types.                      |
| `--typesFileName` | File name (without `.kt`). Single‑file output.               |
| `--clientVersion` | Generator provenance string embedded in header.              |
| `--warning-mode`  | Emission verbosity for the generator.                        |

> The actual codegen implementation lives in the tools module (TypesCodegenKt).

> If you run into this error:

```bash
FAILURE: Build failed with an exception.

* What went wrong:
  25 (or any other number for that matter)
```

> It means the Java version you are using is incompatible, please use Java v24 or earlier. 