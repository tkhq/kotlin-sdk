# com.turnkey.types

Strongly‑typed data models for the Turnkey API, generated from OpenAPI/Swagger. This module ships a single Kotlin source file containing all enums, request/response DTOs, and auxiliary types used by other Turnkey packages (e.g., turnkey-http, sdk-kotlin).

* Single file: Models.kt (package com.turnkey.types)
* Serde: kotlinx.serialization with stable @SerialName mappings
* Coverage: Public API + Auth Proxy models (prefixed with Proxy...)

> Android/JVM compatible. Zero Android dependencies.

## Installation

Gradle (Kotlin DSL):
```kotlin
dependencies {
    implementation("com.turnkey:types:<version>")
    // Serialization runtime
    api("org.jetbrains.kotlinx:kotlinx-serialization-core:<latest>")
    implementation("org.jetbrains.kotlinx:kotlinx-serialization-json:<latest>")
}
```

## What’s inside

* Enums with OpenAPI values via `@SerialName` (e.g., `V1ActivityStatus`, `V1AccessType`)
* DTOs for requests, responses, and embedded payloads (e.g., `V1OauthLoginRequest`, `V1OauthLoginResult`, `V1Attestation`, `V1Authenticator`)
* Proxy DTOs generated from the Auth Proxy spec (all prefixed with Proxy...)

## Code generation

Models are generated by the **tools** module and checked into this module's `src/main/kotlin` directory.

**Inputs** (from repository root):
* `openapi/public_api.swagger.json`
* `openapi/auth_proxy.swagger.json` (models emitted with `Proxy` prefix)

### Run codegen

From repo root:
```bash
./gradlew :packages:types:regenerateModels
```

Or as part of unified generation:
```bash
./gradlew generate
```

### Configuration

The generator is configured in `packages/types/build.gradle.kts`:

```kotlin
args(
    "--out", file("$projectDir/src/main/kotlin").absolutePath,
    "--pkg", "com.turnkey.types",
    "--types-file-name", "Models"
)
```

**Available flags:**

| Flag                | Meaning                                           | Default       |
|---------------------|---------------------------------------------------|---------------|
| `--out`             | Output directory for generated Kotlin             | (required)    |
| `--pkg`             | Kotlin package name                               | (required)    |
| `--types-file-name` | Output filename without `.kt`                     | `Models`      |

**Note:** Spec paths and prefixes are hardcoded in the generator for consistency.

> The generator implementation is `TypesGenerator.kt` in the **tools** package.

> If you run into this error:

```bash
FAILURE: Build failed with an exception.

* What went wrong:
  25 (or any other number for that matter)
```

> It means the JVM toolchain version you are using is incompatible, please use JVM toolchain 24 or earlier. 